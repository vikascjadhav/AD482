import os
import importlib


# Allow ansible roles to be discovered
try:
    module = importlib.import_module("ocpcli")
    __ANSIBLE_ROLES_PATH__ =\
        os.path.dirname(module.__file__) + "/ansible/roles"
except ModuleNotFoundError:
    pass


# Expose singleton oc clients indexed by server url
client_instances = {}


def get_oc_client(server_url: str):
    """
    Returns the oc client configured to connect to the specified OCP server url
    """
    from .client import OcClient

    instance = client_instances.get(server_url)
    if not instance:
        client_instances[server_url] = instance = OcClient(server_url)

    return instance


def generate_project_name(username: str, project_suffix: str) -> str:
    return f"{username}-{project_suffix}"
